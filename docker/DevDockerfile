# syntax=docker/dockerfile:1

# Stage 1: Base for Python and Go
ARG PYTHON_VERSION=3.12.0
ARG GO_VERSION=1.23.5

FROM golang:${GO_VERSION}-bullseye AS base

# Prevents Python from writing pyc files.
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# Set up working directory
WORKDIR /app

# Install Python
RUN apt-get update && apt-get install -y \
    python${PYTHON_VERSION} \
    python${PYTHON_VERSION}-dev \
    python3-pip \
    libpq-dev \
    build-essential \
    && rm -rf /var/lib/apt/lists/*


# Default command (can be overridden in docker-compose.yml)
CMD ["bash"]
